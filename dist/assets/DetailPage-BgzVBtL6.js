import{u as g,a as u,r as l,x as C,y,z as j,j as s,n as x,A as v,B as N,g as k,C as F,t as L,v as I}from"./index-CUtGss9Q.js";import{A as S,m as p,C as w}from"./ChangeModal-0SYffArl.js";function D({show:r,onClose:a,lostFound:i}){const n=g(),m=u(o=>o.isLostFoundChangeCover),b=u(o=>o.isLostFoundChangedCover),[h,c]=l.useState(!1),[e,d]=l.useState(null);l.useEffect(()=>{document.body.style.overflow=r?"hidden":"auto"},[r]),l.useEffect(()=>{m&&(n(C(!1)),b?(n(y(!1)),c(!1),n(j(i.id)),a()):c(!1))},[m,b,i?.id,n,a]);function f(){if(!e){x("Pilih file cover terlebih dahulu!");return}if(!e.type.startsWith("image/")){x("Hanya file gambar yang diperbolehkan!"),d(null);return}const o=5*1024*1024;if(e.size>o){x("Ukuran file terlalu besar. Maksimal 5MB"),d(null);return}c(!0),n(v(i.id,e))}if(i)return s.jsx(S,{children:r&&s.jsxs(s.Fragment,{children:[s.jsx(p.div,{initial:{opacity:0},animate:{opacity:.75},exit:{opacity:0},transition:{duration:.3},className:"modal-backdrop",onClick:a}),s.jsx(p.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{type:"spring",damping:25,stiffness:200},className:"modal",tabIndex:"-1",style:{display:"block"},children:s.jsx("div",{className:"modal-dialog",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header bg-light",children:[s.jsx("h1",{className:"modal-title fs-5",children:"Ubah Cover Lost & Found"}),s.jsx("button",{type:"button",className:"btn-close",onClick:a,"aria-label":"Close"})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"lfCoverInput",className:"form-label",children:"Pilih Cover"}),s.jsx("input",{type:"file",id:"lfCoverInput",name:"cover",accept:"image/*",onChange:o=>{const t=o.target.files?.[0];t&&d(t)},className:"form-control"})]})}),s.jsxs("div",{className:"modal-footer bg-light",children:[s.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:a,children:[s.jsx("i",{className:"bi bi-x-circle"})," Batal"]}),h?s.jsxs("button",{type:"button",className:"btn btn-primary",disabled:!0,children:[s.jsx("span",{className:"spinner-border spinner-border-sm"}),"Â Menyimpan..."]}):s.jsxs("button",{type:"button",className:"btn btn-primary",onClick:f,children:[s.jsx("i",{className:"bi bi-save"})," Simpan"]})]})]})})})]})})}function A(){const{lostFoundId:r}=N(),a=g(),i=k(),[n,m]=l.useState(!1),[b,h]=l.useState(!1),c=u(t=>t.profile),e=u(t=>t.lostFound),d=u(t=>t.isLostFound);l.useEffect(()=>{r&&a(j(r))},[r,a]),l.useEffect(()=>{d&&(a(F(!1)),e||i("/lost-founds"))},[d,e,i,a]);function f(){I("Hapus Lost & Found")}if(!c||!e)return;const o=e.user_id===c.id;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"main-content",children:s.jsxs("div",{className:"container-fluid mt-3",children:[s.jsxs("div",{className:"d-flex align-items-center mb-3",children:[s.jsx("div",{className:"flex-fill",children:s.jsxs("h2",{className:"mb-0",style:{color:"#97d2e8"},children:[e.title,e.status==="found"?s.jsx("span",{className:"badge bg-primary ms-2",style:{backgroundColor:"#4bc0c0",color:"#2b2f5c"},children:"Ditemukan"}):s.jsx("span",{className:"badge bg-warning ms-2",style:{backgroundColor:"#ff6384",color:"#2b2f5c"},children:"Hilang"})]})}),o&&s.jsxs("div",{className:"btn-group",role:"group",children:[s.jsxs("button",{type:"button",className:"btn",onClick:()=>h(!0),style:{backgroundColor:"#7c88ff",color:"#2b2f5c"},children:[s.jsx("i",{className:"bi bi-pencil-square"})," Ubah Detail"]}),s.jsxs("button",{type:"button",className:"btn",onClick:()=>m(!0),style:{backgroundColor:"#97d2e8",color:"#2b2f5c"},children:[s.jsx("i",{className:"bi bi-image"})," Ubah Cover"]}),s.jsxs("button",{type:"button",className:"btn",onClick:f,style:{backgroundColor:"#ff6384",color:"#2b2f5c"},children:[s.jsx("i",{className:"bi bi-trash"})," Hapus"]})]})]}),s.jsx("hr",{style:{borderColor:"#3a416a"}}),s.jsx("div",{className:"card shadow-sm",style:{backgroundColor:"#2b2f5c",color:"#e0e0ff",border:"1px solid #3a416a"},children:s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-5 mb-3 mb-md-0",children:[s.jsx("h5",{className:"card-title",children:"Cover Item"}),e.cover?s.jsx("img",{className:"img-fluid rounded shadow-sm",src:e.cover,alt:"Cover Lost & Found",style:{maxHeight:"400px",objectFit:"cover",border:"1px solid #7c88ff"}}):s.jsxs("div",{className:"text-center p-5 rounded border",style:{backgroundColor:"#3a416a",borderColor:"#4a4f78"},children:[s.jsx("i",{className:"bi bi-image-fill fs-1",style:{color:"#97d2e8"}}),s.jsx("p",{className:"mt-2 text-muted",style:{color:"#e0e0ff"},children:"Tidak ada cover"})]})]}),s.jsxs("div",{className:"col-md-7",children:[s.jsx("h5",{className:"card-title",children:"Deskripsi Item"}),s.jsx("p",{className:"card-text",style:{color:"#c0c0c0"},children:e.description}),s.jsx("hr",{style:{borderColor:"#3a416a"}}),s.jsxs("ul",{className:"list-group list-group-flush",style:{backgroundColor:"transparent"},children:[s.jsxs("li",{className:"list-group-item",style:{backgroundColor:"transparent",borderTop:"1px solid #3a416a",color:"#e0e0ff"},children:[s.jsx("strong",{children:"Status Barang:"})," ",e.status==="found"?s.jsx("span",{style:{color:"#4bc0c0"},children:"Ditemukan"}):s.jsx("span",{style:{color:"#ff6384"},children:"Hilang"})]}),s.jsxs("li",{className:"list-group-item",style:{backgroundColor:"transparent",borderTop:"1px solid #3a416a",borderBottom:"none",color:"#e0e0ff"},children:[s.jsx("strong",{children:"Tanggal Dibuat:"})," ",L(e.created_at)]})]})]})]})})})]})}),s.jsx(w,{show:b,onClose:()=>h(!1),lostFoundId:e.id}),s.jsx(D,{show:n,onClose:()=>m(!1),lostFound:e})]})}export{A as default};
