import{u as C,a as h,r as i,G as S,p as N,c as g,H as F,j as e,n as u,I,J as w}from"./index-CUtGss9Q.js";function M(){const a=C(),l=h(s=>s.profile),b=h(s=>s.isChangeProfile),p=h(s=>s.isChangeProfilePhoto),[t,n]=i.useState(!1),[o,x]=i.useState(""),[c,j]=i.useState(""),[r,d]=i.useState(null),m=i.useRef(null);i.useEffect(()=>{l&&(x(l.name||""),j(l.email||""))},[l]),i.useEffect(()=>{b&&(n(!1),a(S(!1)),N("Data diri berhasil diperbarui!"),a(g()))},[b,a]),i.useEffect(()=>{p&&(n(!1),a(F(!1)),N("Foto profil berhasil diperbarui!"),d(null),a(g()))},[p,a]);function P(){if(!o||!c){u("Nama dan Email tidak boleh kosong.");return}n(!0),a(w(o,c))}function v(){if(!r){u("Pilih file foto terlebih dahulu.");return}n(!0),a(I(r))}function y(s){const f=s.target.files[0];if(f){if(f.size>5242880){u("Ukuran file terlalu besar. Maksimal 5MB"),m.current&&(m.current.value=""),d(null);return}d(f)}}if(!l)return e.jsx("div",{className:"main-content",children:e.jsx("div",{className:"container-fluid mt-3",children:e.jsx("p",{children:"Memuat data profil..."})})});const E=r?URL.createObjectURL(r):l.photo||"/default-user.png";return e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"container-fluid mt-3",children:[e.jsx("h2",{children:"Ubah Data Profil"}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("h5",{className:"card-title mb-3",children:"Foto Profil"}),e.jsx("img",{src:E,alt:"Foto Profil",className:"rounded-circle mb-3",style:{width:"150px",height:"150px",objectFit:"cover",border:"3px solid #0d6efd"}}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,ref:m,className:"form-control mb-3",disabled:t}),r&&e.jsxs("button",{type:"button",className:"btn btn-warning w-100",onClick:v,disabled:t,children:[t?e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}):e.jsx("i",{className:"bi bi-upload me-2"}),"Unggah Foto"]})]})})}),e.jsx("div",{className:"col-md-8",children:e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title mb-3",children:"Informasi Akun"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"profileName",className:"form-label",children:"Nama"}),e.jsx("input",{id:"profileName",type:"text",className:"form-control",value:o,onChange:s=>x(s.target.value),disabled:t})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"profileEmail",className:"form-label",children:"Email"}),e.jsx("input",{id:"profileEmail",type:"email",className:"form-control",value:c,onChange:s=>j(s.target.value),disabled:t})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:t?e.jsxs("button",{type:"button",className:"btn btn-primary",disabled:!0,children:[e.jsx("span",{className:"spinner-border spinner-border-sm"}),"Â Menyimpan..."]}):e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:P,children:[e.jsx("i",{className:"bi bi-save me-2"})," Simpan Data Diri"]})})]})})})]})]})})}export{M as default};
